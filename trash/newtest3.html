<!DOCTYPE html>

<html>

<head>

	<!-- Load the Paper.js library from sub folder /js  -->
	<script type="text/javascript" src="./scripts/paper.js"></script>
	<!-- Define inlined PaperScript associate it with myCanvas -->
	<script type="text/paperscript" canvas="myCanvas">

var raster = new Raster('mona');
// Move the raster to the center of the view
raster.position = view.center;
raster.fitBounds(view.bounds, true);
raster.remove();


//variables to be set by user interface
			//number of dots
			var nod = 1500
			//size of dots
			var sod = 16
			//spacing of dots
			var spod = 1.9
			var phi = 1-0.618033989 

var cent = new Point(view.center);
var vector = new Point(cent);

var secondLayer = new Layer();

var rot = 358;
	var len = 8.2*spod;
	vector.angle = rot;
	vector.length = len;

var circ = new Path.Circle({
		center: (cent + vector),
		radius: sod
	});

	circ.fillColor = raster.getAverageColor(circ); 
	
// create a new layer - all new items automaticaly added to this layer
var secondLayer = new Layer();

//create some new items and color them acording to raster
for (var i = 1; i < nod; i++) {

	var rot = phi * 360 * i;
	var len = Math.sqrt(rot);
	vector.angle = rot;
	vector.length = len*spod;
		
		var circ = new Path.Circle({
		center: (cent + vector),
		radius: sod
		});

	circ.fillColor = raster.getAverageColor(circ); 
	};

// create short name
var children = paper.project.activeLayer.children;

// create variables and set them to arbitary values
var x = 1
var child = children[1];
var swap = children[2];
var temp = new Path.Circle({
		center: (0,0),
		radius: 1
	});

// set n to the number of items on layer
var n = children.length

// Loop through the number items on layer
for (var i = 0; i < n ; i++) {
	child = children[i];
	
	//create a random number between 0 and number of objects
	x = Math.floor(Math.random()*n);
	
	// set the color to be swaped to random
	swap = children[x];

<!-- //swap the colors
	temp.fillColor = child.fillColor;
	child.fillColor = swap.fillColor;
	swap.fillColor = temp.fillColor;
//swap loop end -->
};

//delete temp item
temp.delete;

}

</script>
</head>

<body>
	<canvas id="myCanvas" resize></canvas>
	<img id="mona" src="mona.jpg" <style="display:none"> </img>
</body>

</html>